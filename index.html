<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Spotify Lite Premium</title>
<link href="https://fonts.googleapis.com/css2?family=Syne:wght@400;600;700;800&family=DM+Sans:wght@300;400;500&display=swap" rel="stylesheet">
<style>
:root {
  --bg: #080810;
  --surface: #0f0f1a;
  --card: #13131f;
  --accent: #1db954;
  --accent2: #a259ff;
  --muted: #3a3a55;
  --text: #e8e8f0;
  --sub: #7070a0;
  --glass: rgba(255,255,255,0.04);
  --radius: 18px;
}

*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

html { scroll-behavior: smooth; }

body {
  font-family: 'DM Sans', sans-serif;
  background: var(--bg);
  color: var(--text);
  min-height: 100vh;
  overflow-x: hidden;
}

/* BG BLOBS */
body::before {
  content: '';
  position: fixed;
  width: 600px; height: 600px;
  background: radial-gradient(circle, rgba(161,89,255,0.12) 0%, transparent 70%);
  top: -200px; right: -200px;
  border-radius: 50%;
  pointer-events: none;
  z-index: 0;
}
body::after {
  content: '';
  position: fixed;
  width: 500px; height: 500px;
  background: radial-gradient(circle, rgba(29,185,84,0.09) 0%, transparent 70%);
  bottom: -150px; left: -150px;
  border-radius: 50%;
  pointer-events: none;
  z-index: 0;
}

/* SCROLLBAR */
::-webkit-scrollbar { width: 4px; }
::-webkit-scrollbar-track { background: transparent; }
::-webkit-scrollbar-thumb { background: var(--muted); border-radius: 4px; }

/* LOGIN */
#loginScreen {
  position: fixed;
  inset: 0;
  background: rgba(8,8,16,0.95);
  backdrop-filter: blur(20px);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 999;
  opacity: 1;
  transition: opacity 0.4s ease;
}
#loginScreen.hidden {
  opacity: 0;
  pointer-events: none;
}

.login-box {
  background: var(--card);
  border: 1px solid rgba(255,255,255,0.07);
  padding: 40px 32px;
  border-radius: 24px;
  width: 320px;
  text-align: center;
  position: relative;
  overflow: hidden;
  animation: slideUp 0.5s cubic-bezier(0.16,1,0.3,1);
}
.login-box::before {
  content: '';
  position: absolute;
  top: 0; left: 0; right: 0;
  height: 1px;
  background: linear-gradient(90deg, transparent, var(--accent2), transparent);
}

@keyframes slideUp {
  from { transform: translateY(40px); opacity: 0; }
  to { transform: translateY(0); opacity: 1; }
}

.login-logo {
  width: 48px; height: 48px;
  background: linear-gradient(135deg, var(--accent), var(--accent2));
  border-radius: 14px;
  margin: 0 auto 20px;
  display: flex; align-items: center; justify-content: center;
  font-size: 22px;
}

.login-box h2 {
  font-family: 'Syne', sans-serif;
  font-size: 22px;
  font-weight: 700;
  margin-bottom: 6px;
}

.login-box p {
  color: var(--sub);
  font-size: 13px;
  margin-bottom: 24px;
}

.input-group {
  position: relative;
  margin-bottom: 12px;
}
.input-group input {
  width: 100%;
  background: rgba(255,255,255,0.05);
  border: 1px solid rgba(255,255,255,0.08);
  border-radius: 12px;
  padding: 12px 16px;
  color: var(--text);
  font-family: 'DM Sans', sans-serif;
  font-size: 14px;
  outline: none;
  transition: border 0.2s;
}
.input-group input:focus {
  border-color: var(--accent2);
}
.input-group input::placeholder { color: var(--sub); }

.btn-primary {
  width: 100%;
  padding: 13px;
  background: linear-gradient(135deg, var(--accent), #16a344);
  border: none;
  border-radius: 12px;
  color: #000;
  font-family: 'Syne', sans-serif;
  font-weight: 700;
  font-size: 14px;
  cursor: pointer;
  transition: transform 0.15s, opacity 0.15s;
  margin-top: 4px;
}
.btn-primary:hover { opacity: 0.88; transform: translateY(-1px); }
.btn-primary:active { transform: translateY(0); }

.btn-ghost {
  width: 100%;
  padding: 13px;
  background: var(--glass);
  border: 1px solid rgba(255,255,255,0.07);
  border-radius: 12px;
  color: var(--sub);
  font-family: 'DM Sans', sans-serif;
  font-size: 14px;
  cursor: pointer;
  transition: color 0.2s, border 0.2s;
  margin-top: 8px;
}
.btn-ghost:hover { color: var(--text); border-color: rgba(255,255,255,0.15); }

.divider {
  display: flex; align-items: center; gap: 10px;
  margin: 16px 0;
  color: var(--sub); font-size: 12px;
}
.divider::before, .divider::after {
  content: ''; flex: 1;
  height: 1px;
  background: rgba(255,255,255,0.07);
}

/* APP */
.app {
  position: relative;
  z-index: 1;
  max-width: 480px;
  margin: 0 auto;
  min-height: 100vh;
  display: flex;
  flex-direction: column;
  padding: 0 0 140px;
}

/* TOPBAR */
.topbar {
  position: sticky;
  top: 0;
  z-index: 50;
  padding: 20px 20px 0;
  background: linear-gradient(to bottom, var(--bg) 70%, transparent);
}
.topbar-inner {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding-bottom: 16px;
}
.brand {
  display: flex; align-items: center; gap: 10px;
}
.brand-icon {
  width: 34px; height: 34px;
  background: linear-gradient(135deg, var(--accent), var(--accent2));
  border-radius: 10px;
  display: flex; align-items: center; justify-content: center;
  font-size: 15px;
}
.brand-name {
  font-family: 'Syne', sans-serif;
  font-weight: 800;
  font-size: 16px;
  letter-spacing: -0.3px;
}

.badge-premium {
  font-size: 9px;
  font-weight: 700;
  letter-spacing: 0.8px;
  text-transform: uppercase;
  padding: 3px 8px;
  border-radius: 20px;
  background: linear-gradient(135deg, var(--accent2), #7b2fff);
  color: white;
}
.badge-free {
  font-size: 9px;
  font-weight: 700;
  letter-spacing: 0.8px;
  text-transform: uppercase;
  padding: 3px 8px;
  border-radius: 20px;
  background: rgba(255,255,255,0.08);
  color: var(--sub);
}

.btn-logout {
  background: none;
  border: 1px solid rgba(255,255,255,0.08);
  color: var(--sub);
  padding: 6px 14px;
  border-radius: 20px;
  font-size: 12px;
  cursor: pointer;
  transition: all 0.2s;
}
.btn-logout:hover { color: var(--text); border-color: rgba(255,255,255,0.2); }

/* NOW PLAYING CARD */
.now-playing {
  margin: 20px 20px 0;
  background: var(--card);
  border: 1px solid rgba(255,255,255,0.06);
  border-radius: 24px;
  padding: 24px;
  position: relative;
  overflow: hidden;
}
.now-playing::before {
  content: '';
  position: absolute;
  inset: 0;
  background: linear-gradient(135deg, rgba(161,89,255,0.06), rgba(29,185,84,0.04));
  pointer-events: none;
}

.np-cover {
  width: 80px; height: 80px;
  border-radius: 16px;
  background: linear-gradient(135deg, var(--accent2), var(--accent));
  display: flex; align-items: center; justify-content: center;
  font-size: 32px;
  margin-bottom: 16px;
  box-shadow: 0 8px 32px rgba(161,89,255,0.3);
  transition: transform 0.3s ease;
}
.np-cover.playing {
  animation: pulse-cover 2s ease-in-out infinite;
}
@keyframes pulse-cover {
  0%, 100% { transform: scale(1); box-shadow: 0 8px 32px rgba(161,89,255,0.3); }
  50% { transform: scale(1.03); box-shadow: 0 12px 40px rgba(161,89,255,0.5); }
}

.np-info {
  margin-bottom: 20px;
}
.np-title {
  font-family: 'Syne', sans-serif;
  font-weight: 700;
  font-size: 18px;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}
.np-artist {
  color: var(--sub);
  font-size: 13px;
  margin-top: 3px;
}

/* PROGRESS BAR */
.progress-wrap {
  margin-bottom: 20px;
}
.progress-bar-track {
  width: 100%;
  height: 3px;
  background: rgba(255,255,255,0.08);
  border-radius: 10px;
  cursor: pointer;
  position: relative;
  overflow: hidden;
}
.progress-bar-fill {
  height: 100%;
  width: 0%;
  background: linear-gradient(90deg, var(--accent2), var(--accent));
  border-radius: 10px;
  transition: width 0.5s linear;
}
.progress-times {
  display: flex;
  justify-content: space-between;
  margin-top: 6px;
  font-size: 11px;
  color: var(--sub);
}

/* CONTROLS */
.controls {
  display: flex;
  align-items: center;
  justify-content: space-between;
}
.ctrl-btn {
  background: none;
  border: none;
  color: var(--sub);
  cursor: pointer;
  padding: 8px;
  border-radius: 50%;
  display: flex; align-items: center; justify-content: center;
  transition: color 0.2s, transform 0.15s;
  font-size: 18px;
}
.ctrl-btn:hover { color: var(--text); transform: scale(1.15); }

.ctrl-btn.mode-active {
  color: var(--accent);
}

.ctrl-btn-play {
  width: 54px; height: 54px;
  background: linear-gradient(135deg, var(--accent), #16a344);
  border: none;
  border-radius: 50%;
  color: #000;
  font-size: 20px;
  cursor: pointer;
  display: flex; align-items: center; justify-content: center;
  transition: transform 0.15s, box-shadow 0.2s;
  box-shadow: 0 4px 20px rgba(29,185,84,0.4);
}
.ctrl-btn-play:hover { transform: scale(1.08); box-shadow: 0 6px 28px rgba(29,185,84,0.6); }
.ctrl-btn-play:active { transform: scale(0.96); }

/* HIDDEN AUDIO */
#audio { display: none; }

/* PLAYLIST */
.playlist-section {
  padding: 24px 20px 0;
}
.section-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 14px;
}
.section-title {
  font-family: 'Syne', sans-serif;
  font-weight: 700;
  font-size: 16px;
}
.section-count {
  font-size: 12px;
  color: var(--sub);
}

.song-list {
  display: flex;
  flex-direction: column;
  gap: 2px;
}

.song-row {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 10px 12px;
  border-radius: 14px;
  cursor: pointer;
  transition: background 0.2s, transform 0.15s;
  position: relative;
}
.song-row:hover {
  background: var(--glass);
}
.song-row.active {
  background: rgba(29,185,84,0.08);
}
.song-row.active:hover {
  background: rgba(29,185,84,0.12);
}

.song-num {
  width: 28px;
  text-align: center;
  font-size: 12px;
  color: var(--sub);
  flex-shrink: 0;
}
.song-row.active .song-num { color: var(--accent); }

.song-icon {
  width: 40px; height: 40px;
  border-radius: 10px;
  background: var(--muted);
  display: flex; align-items: center; justify-content: center;
  font-size: 16px;
  flex-shrink: 0;
  transition: transform 0.2s;
}
.song-row:hover .song-icon { transform: scale(1.05); }

.song-details {
  flex: 1;
  overflow: hidden;
}
.song-name {
  font-size: 13.5px;
  font-weight: 500;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}
.song-row.active .song-name { color: var(--accent); }
.song-meta {
  font-size: 11px;
  color: var(--sub);
  margin-top: 2px;
}

.song-playing-indicator {
  display: none;
  align-items: center;
  gap: 2px;
  height: 16px;
}
.song-row.active .song-playing-indicator {
  display: flex;
}
.bar {
  width: 2px;
  background: var(--accent);
  border-radius: 2px;
  animation: equalizer 0.8s ease-in-out infinite alternate;
}
.bar:nth-child(1) { height: 8px; animation-delay: 0s; }
.bar:nth-child(2) { height: 14px; animation-delay: 0.2s; }
.bar:nth-child(3) { height: 6px; animation-delay: 0.4s; }
.bar:nth-child(4) { height: 12px; animation-delay: 0.1s; }

@keyframes equalizer {
  from { transform: scaleY(0.3); }
  to { transform: scaleY(1); }
}

/* VOLUME */
.volume-wrap {
  display: flex;
  align-items: center;
  gap: 10px;
  margin-top: 16px;
  padding-top: 16px;
  border-top: 1px solid rgba(255,255,255,0.06);
}
.vol-icon { color: var(--sub); font-size: 14px; }
input[type=range] {
  -webkit-appearance: none;
  flex: 1;
  height: 3px;
  background: rgba(255,255,255,0.1);
  border-radius: 10px;
  outline: none;
  cursor: pointer;
}
input[type=range]::-webkit-slider-thumb {
  -webkit-appearance: none;
  width: 12px; height: 12px;
  background: var(--text);
  border-radius: 50%;
  cursor: pointer;
}

/* TOAST */
#toast {
  position: fixed;
  bottom: 20px;
  left: 50%;
  transform: translateX(-50%) translateY(60px);
  background: var(--card);
  border: 1px solid rgba(255,255,255,0.08);
  padding: 10px 20px;
  border-radius: 40px;
  font-size: 13px;
  color: var(--text);
  z-index: 1000;
  transition: transform 0.35s cubic-bezier(0.16,1,0.3,1);
  white-space: nowrap;
}
#toast.show {
  transform: translateX(-50%) translateY(0);
}

/* Emoji icons for songs */
.icon-0 { background: linear-gradient(135deg,#ff6b9d,#c44569); }
.icon-1 { background: linear-gradient(135deg,#a29bfe,#6c5ce7); }
.icon-2 { background: linear-gradient(135deg,#fd79a8,#e84393); }
.icon-3 { background: linear-gradient(135deg,#55efc4,#00b894); }
.icon-4 { background: linear-gradient(135deg,#fdcb6e,#e17055); }
.icon-5 { background: linear-gradient(135deg,#74b9ff,#0984e3); }
.icon-6 { background: linear-gradient(135deg,#ff7675,#d63031); }
.icon-7 { background: linear-gradient(135deg,#00cec9,#00b894); }
.icon-8 { background: linear-gradient(135deg,#fd79a8,#a29bfe); }
.icon-9 { background: linear-gradient(135deg,#ffeaa7,#fdcb6e); }
.icon-10 { background: linear-gradient(135deg,#81ecec,#00cec9); }
.icon-11 { background: linear-gradient(135deg,#55efc4,#00b894); }
.icon-12 { background: linear-gradient(135deg,#fab1a0,#e17055); }
.icon-13 { background: linear-gradient(135deg,#a29bfe,#74b9ff); }
.icon-14 { background: linear-gradient(135deg,#ffd32a,#ffc312); }
.icon-15 { background: linear-gradient(135deg,#ff5e57,#ff3f34); }
.icon-16 { background: linear-gradient(135deg,#0be881,#05c46b); }
.icon-17 { background: linear-gradient(135deg,#ff5e57,#a29bfe); }
.icon-18 { background: linear-gradient(135deg,#4bcffa,#0fbcf9); }
</style>
</head>
<body>

<!-- TOAST -->
<div id="toast"></div>

<!-- LOGIN -->
<div id="loginScreen">
  <div class="login-box">
    <div class="login-logo">üéµ</div>
    <h2>Selamat Datang</h2>
    <p>Masuk untuk menikmati musik favoritmu</p>
    <div class="input-group">
      <input id="user" placeholder="Username" autocomplete="off">
    </div>
    <div class="input-group">
      <input id="pass" type="password" placeholder="Password">
    </div>
    <button class="btn-primary" id="btnLogin">Masuk Premium</button>
    <div class="divider">atau</div>
    <button class="btn-ghost" id="btnGuest">Lanjut Gratis</button>
  </div>
</div>

<!-- APP -->
<div class="app">
  <!-- TOPBAR -->
  <div class="topbar">
    <div class="topbar-inner">
      <div class="brand">
        <div class="brand-icon">üéµ</div>
        <span class="brand-name">MusikLite</span>
        <span id="userBadge" class="badge-premium">Premium</span>
      </div>
      <button class="btn-logout" id="logout">Keluar</button>
    </div>
  </div>

  <!-- NOW PLAYING -->
  <div class="now-playing">
    <div class="np-cover" id="npCover">üéµ</div>
    <div class="np-info">
      <div class="np-title" id="npTitle">Pilih Lagu</div>
      <div class="np-artist">MusikLite Player</div>
    </div>

    <div class="progress-wrap">
      <div class="progress-bar-track" id="progressTrack">
        <div class="progress-bar-fill" id="progressFill"></div>
      </div>
      <div class="progress-times">
        <span id="currentTime">0:00</span>
        <span id="totalTime">0:00</span>
      </div>
    </div>

    <div class="controls">
      <button class="ctrl-btn" id="btnMode" title="Mode">üîÅ</button>
      <button class="ctrl-btn" id="btnPrev" title="Sebelumnya">‚èÆ</button>
      <button class="ctrl-btn-play" id="btnPlay">‚ñ∂</button>
      <button class="ctrl-btn" id="btnNext" title="Berikutnya">‚è≠</button>
      <button class="ctrl-btn" id="btnLike" title="Suka">ü§ç</button>
    </div>

    <div class="volume-wrap">
      <span class="vol-icon">üîà</span>
      <input type="range" id="volume" min="0" max="1" step="0.01" value="0.8">
      <span class="vol-icon">üîä</span>
    </div>
  </div>

  <audio id="audio" preload="auto" playsinline></audio>

  <!-- PLAYLIST -->
  <div class="playlist-section">
    <div class="section-header">
      <span class="section-title">Playlist</span>
      <span class="section-count" id="songCount">0 lagu</span>
    </div>
    <div class="song-list" id="list"></div>
  </div>
</div>
<script src="lagu.js">
</script>
<script>

const audio = document.getElementById("audio");
const npTitle = document.getElementById("npTitle");
const npCover = document.getElementById("npCover");
const progressFill = document.getElementById("progressFill");
const progressTrack = document.getElementById("progressTrack");
const currentTimeEl = document.getElementById("currentTime");
const totalTimeEl = document.getElementById("totalTime");
const listEl = document.getElementById("list");
const btnPlay = document.getElementById("btnPlay");
const btnPrev = document.getElementById("btnPrev");
const btnNext = document.getElementById("btnNext");
const btnMode = document.getElementById("btnMode");
const btnLike = document.getElementById("btnLike");
const btnLogout = document.getElementById("logout");
const loginScreen = document.getElementById("loginScreen");
const btnLogin = document.getElementById("btnLogin");
const btnGuest = document.getElementById("btnGuest");
const volumeSlider = document.getElementById("volume");
const userBadge = document.getElementById("userBadge");
const toastEl = document.getElementById("toast");
const songCountEl = document.getElementById("songCount");

let idx = 0;
let isPremium = false;
let isPlaying = false;
let mode = 0; // 0=normal, 1=repeat all, 2=repeat one, 3=shuffle
const modeEmojis = ["üîÅ","üîÅ","üîÇ","üîÄ"];
const modeNames = ["Normal","Repeat All","Repeat One","Shuffle"];
let liked = new Set();

// TOAST
function showToast(msg) {
  toastEl.textContent = msg;
  toastEl.classList.add('show');
  clearTimeout(toastEl._t);
  toastEl._t = setTimeout(() => toastEl.classList.remove('show'), 2500);
}

// LOGIN
function checkLogin() {
  const status = localStorage.getItem("mlUser");
  if (status) {
    isPremium = status === "premium";
    loginScreen.classList.add('hidden');
    updateBadge();
  }
}

function updateBadge() {
  if (isPremium) {
    userBadge.textContent = 'Premium';
    userBadge.className = 'badge-premium';
    btnMode.style.display = 'flex';
  } else {
    userBadge.textContent = 'Free';
    userBadge.className = 'badge-free';
    btnMode.style.display = 'none';
  }
}

btnLogin.onclick = () => {
  const u = document.getElementById("user").value.trim();
  const p = document.getElementById("pass").value;
  if (u === "admin" && p === "123") {
    localStorage.setItem("mlUser", "premium");
    isPremium = true;
    loginScreen.classList.add('hidden');
    updateBadge();
    showToast("‚ú® Selamat datang, Premium!");
  } else {
    document.querySelector('.login-box').style.animation = 'none';
    setTimeout(() => { document.querySelector('.login-box').style.animation = 'shake 0.4s ease'; }, 10);
    showToast("‚ùå Username atau password salah");
  }
};

btnGuest.onclick = () => {
  localStorage.setItem("mlUser", "guest");
  isPremium = false;
  loginScreen.classList.add('hidden');
  updateBadge();
  showToast("üëã Masuk sebagai tamu");
};

btnLogout.onclick = () => {
  localStorage.removeItem("mlUser");
  audio.pause();
  isPlaying = false;
  btnPlay.textContent = '‚ñ∂';
  npCover.classList.remove('playing');
  loginScreen.style.opacity = '0';
  loginScreen.classList.remove('hidden');
  setTimeout(() => { loginScreen.style.opacity = '1'; }, 10);
};

checkLogin();

// PLAYER
function loadSong(i) {
  idx = i;
  audio.src = songs[i].src;
  audio.volume = volumeSlider.value;
  npTitle.textContent = songs[i].title;
  npCover.textContent = songs[i].emoji;
  npCover.className = 'np-cover icon-' + i;
  renderList();
  updateMediaSession();
}

function setPlaying(val) {
  isPlaying = val;
  btnPlay.textContent = val ? '‚è∏' : '‚ñ∂';
  if (val) npCover.classList.add('playing');
  else npCover.classList.remove('playing');
  // animate bars
  document.querySelectorAll('.bar').forEach(b => {
    b.style.animationPlayState = val ? 'running' : 'paused';
  });
}

btnPlay.onclick = () => {
  if (audio.paused) {
    audio.play().then(() => setPlaying(true));
  } else {
    audio.pause();
    setPlaying(false);
  }
};

btnPrev.onclick = () => {
  idx = (idx - 1 + songs.length) % songs.length;
  loadSong(idx);
  audio.play().then(() => setPlaying(true));
};

function nextSong() {
  if (mode === 2) { audio.currentTime = 0; audio.play(); return; }
  if (mode === 3) { idx = Math.floor(Math.random() * songs.length); }
  else { idx++; if (idx >= songs.length) { if (mode === 1) idx = 0; else { setPlaying(false); return; } } }
  loadSong(idx);
  audio.play().then(() => setPlaying(true));
}

btnNext.onclick = () => {
  if (mode === 3) idx = Math.floor(Math.random() * songs.length);
  else { idx = (idx + 1) % songs.length; }
  loadSong(idx);
  audio.play().then(() => setPlaying(true));
};

audio.onended = nextSong;

btnMode.onclick = () => {
  if (!isPremium) { showToast("üîí Fitur eksklusif Premium"); return; }
  mode = (mode + 1) % 4;
  btnMode.textContent = modeEmojis[mode];
  btnMode.classList.toggle('mode-active', mode !== 0);
  showToast("Mode: " + modeNames[mode]);
};

btnLike.onclick = () => {
  if (liked.has(idx)) {
    liked.delete(idx);
    btnLike.textContent = 'ü§ç';
    showToast("Dihapus dari favorit");
  } else {
    liked.add(idx);
    btnLike.textContent = '‚ù§Ô∏è';
    showToast("Ditambah ke favorit");
  }
};

// PROGRESS
audio.ontimeupdate = () => {
  if (!audio.duration) return;
  const pct = (audio.currentTime / audio.duration) * 100;
  progressFill.style.width = pct + '%';
  currentTimeEl.textContent = formatTime(audio.currentTime);
  totalTimeEl.textContent = formatTime(audio.duration);
};

progressTrack.onclick = (e) => {
  const rect = progressTrack.getBoundingClientRect();
  const pct = (e.clientX - rect.left) / rect.width;
  audio.currentTime = pct * audio.duration;
};

function formatTime(s) {
  if (isNaN(s)) return '0:00';
  const m = Math.floor(s / 60);
  const sec = Math.floor(s % 60).toString().padStart(2,'0');
  return m + ':' + sec;
}

volumeSlider.oninput = () => { audio.volume = volumeSlider.value; };

// LIST
function renderList() {
  listEl.innerHTML = '';
  songCountEl.textContent = songs.length + ' lagu';
  songs.forEach((s, i) => {
    const div = document.createElement('div');
    div.className = 'song-row' + (i === idx ? ' active' : '');
    div.innerHTML = `
      <span class="song-num">${i === idx ? '' : i + 1}</span>
      <div class="song-icon icon-${i}">${s.emoji}</div>
      <div class="song-details">
        <div class="song-name">${s.title}</div>
        <div class="song-meta">MusikLite</div>
      </div>
      <div class="song-playing-indicator">
        <div class="bar"></div>
        <div class="bar"></div>
        <div class="bar"></div>
        <div class="bar"></div>
      </div>
    `;
    div.onclick = () => {
      loadSong(i);
      audio.play().then(() => setPlaying(true));
    };
    listEl.appendChild(div);
  });

  // Scroll active into view smoothly
  const active = listEl.querySelector('.active');
  if (active) active.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
}

// MEDIA SESSION
function updateMediaSession() {
  if ('mediaSession' in navigator) {
    navigator.mediaSession.metadata = new MediaMetadata({
      title: songs[idx].title,
      artist: 'MusikLite',
      album: 'Playlist'
    });
    navigator.mediaSession.setActionHandler('play', () => { audio.play(); setPlaying(true); });
    navigator.mediaSession.setActionHandler('pause', () => { audio.pause(); setPlaying(false); });
    navigator.mediaSession.setActionHandler('previoustrack', () => btnPrev.onclick());
    navigator.mediaSession.setActionHandler('nexttrack', () => btnNext.onclick());
  }
}

// SHAKE ANIM
const style = document.createElement('style');
style.textContent = `@keyframes shake { 0%,100%{transform:translateX(0)} 20%,60%{transform:translateX(-8px)} 40%,80%{transform:translateX(8px)} }`;
document.head.appendChild(style);

loadSong(0);
</script>
<script>
/* ===== LIST ALBUM ARTIS DENGAN SRC ===== */
const albums = [
  {
    artist: "Armada",
    albums: [
      { songs: [
          { name: "Ku Tetap Setia", src: "lagu/ku_tetap_setia.mp3" },
          { name: "Asal Kau Bahagia", src: "lagu/asal_kau_bahagia.mp3" }
        ] 
      },
      {  songs: [
          { name: "Harus Terpisah", src: "lagu/harus_terpisah.mp3" },
          { name: "Kamu Harus Bahagia", src: "lagu/kamu_harus_bahagia.mp3" }
        ] 
      },
      { songs: [
          { name: "Harusnya Aku", src: "lagu/harusnya_aku.mp3" },
          { name: "Terima Kasih Cinta", src: "lagu/terima_kasih_cinta.mp3" }
        ] 
      }
    ]
  }
];

// RENDER ALBUM DI SECTION BARU
const playlistSection = document.createElement('div');
playlistSection.className = 'playlist-section';
playlistSection.innerHTML = `<div class="section-header">
  <span class="section-title">Album Armada</span>
</div>`;
document.querySelector('.app').appendChild(playlistSection);

albums[0].albums.forEach((alb) => {
  const albumDiv = document.createElement('div');
  albumDiv.className = 'song-list';
  albumDiv.innerHTML = `<div class="section-title" style="font-size:14px;margin-bottom:6px;">${alb.title}</div>`;
  
  alb.songs.forEach((song, si) => {
    const songRow = document.createElement('div');
    songRow.className = 'song-row';
    songRow.innerHTML = `
      <span class="song-num">${si+1}</span>
      <div class="song-icon">üéµ</div>
      <div class="song-details">
        <div class="song-name">${song.name}</div>
        <div class="song-meta">${albums[0].artist}</div>
      </div>
    `;
    songRow.onclick = () => {
      // SET AUDIO PLAYER LANGSUNG
      audio.src = song.src;
      audio.play().then(() => setPlaying(true));
      npTitle.textContent = song.name;
      npCover.textContent = "üéµ";
      showToast("Memainkan: " + song.name);
      renderList(); // update highlight active song
    };
    albumDiv.appendChild(songRow);
  });

  playlistSection.appendChild(albumDiv);
});
</script>
</body>
</html>
