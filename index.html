<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Music Player</title>
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&family=DM+Sans:wght@300;400;500&display=swap" rel="stylesheet">
<style>
  *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

  :root {
    --bg: #0d0d0d;
    --surface: #161616;
    --surface2: #1e1e1e;
    --accent: #c9a96e;
    --accent2: #e8c99a;
    --text: #f0ede8;
    --muted: #6b6560;
    --active: #2a2520;
  }

  body {
    background: var(--bg);
    color: var(--text);
    font-family: 'DM Sans', sans-serif;
    min-height: 100vh;
    display: flex;
    justify-content: center;
    align-items: center;
    padding: 20px;
  }

  .app {
    width: 100%;
    max-width: 820px;
    display: grid;
    grid-template-columns: 340px 1fr;
    gap: 0;
    border-radius: 24px;
    overflow: hidden;
    box-shadow: 0 40px 80px rgba(0,0,0,0.7);
    background: var(--surface);
    min-height: 560px;
  }

  /* â”€â”€ Left Panel â”€â”€ */
  .player-panel {
    background: var(--surface);
    padding: 36px 32px;
    display: flex;
    flex-direction: column;
    align-items: center;
    border-right: 1px solid #222;
    position: relative;
  }

  .album-art {
    width: 220px;
    height: 220px;
    border-radius: 16px;
    object-fit: cover;
    background: var(--surface2);
    box-shadow: 0 20px 50px rgba(0,0,0,0.6), 0 0 0 1px rgba(255,255,255,0.05);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 60px;
    overflow: hidden;
    flex-shrink: 0;
    transition: transform 0.3s ease;
  }

  .album-art.playing {
    animation: float 4s ease-in-out infinite;
  }

  @keyframes float {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-6px); }
  }

  .album-art img {
    width: 100%;
    height: 100%;
    object-fit: cover;
  }

  .song-info {
    margin-top: 24px;
    text-align: center;
    width: 100%;
  }

  .song-title {
    font-family: 'Playfair Display', serif;
    font-size: 20px;
    font-weight: 700;
    color: var(--text);
    line-height: 1.3;
    margin-bottom: 6px;
  }

  .song-artist {
    font-size: 13px;
    color: var(--accent);
    font-weight: 500;
    letter-spacing: 0.08em;
    text-transform: uppercase;
  }

  /* Progress */
  .progress-wrap {
    width: 100%;
    margin-top: 24px;
  }

  .time-row {
    display: flex;
    justify-content: space-between;
    font-size: 11px;
    color: var(--muted);
    margin-bottom: 8px;
  }

  input[type="range"] {
    -webkit-appearance: none;
    width: 100%;
    height: 3px;
    background: var(--surface2);
    border-radius: 99px;
    outline: none;
    cursor: pointer;
  }

  input[type="range"]::-webkit-slider-thumb {
    -webkit-appearance: none;
    width: 13px;
    height: 13px;
    border-radius: 50%;
    background: var(--accent);
    cursor: pointer;
    box-shadow: 0 0 0 3px rgba(201,169,110,0.2);
    transition: transform 0.15s;
  }

  input[type="range"]::-webkit-slider-thumb:hover {
    transform: scale(1.3);
  }

  /* Controls */
  .controls {
    display: flex;
    align-items: center;
    gap: 20px;
    margin-top: 24px;
  }

  .btn-icon {
    background: none;
    border: none;
    color: var(--muted);
    cursor: pointer;
    font-size: 18px;
    padding: 8px;
    border-radius: 50%;
    transition: color 0.2s, transform 0.15s;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .btn-icon:hover { color: var(--text); transform: scale(1.1); }

  .btn-play {
    background: var(--accent);
    border: none;
    color: #0d0d0d;
    cursor: pointer;
    width: 52px;
    height: 52px;
    border-radius: 50%;
    font-size: 20px;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: background 0.2s, transform 0.15s;
    box-shadow: 0 6px 20px rgba(201,169,110,0.35);
  }

  .btn-play:hover { background: var(--accent2); transform: scale(1.05); }

  /* â”€â”€ Right Panel â”€â”€ */
  .list-panel {
    background: var(--bg);
    display: flex;
    flex-direction: column;
  }

  .list-header {
    padding: 28px 28px 16px;
    border-bottom: 1px solid #1a1a1a;
  }

  .list-header h3 {
    font-family: 'Playfair Display', serif;
    font-size: 18px;
    color: var(--text);
    margin-bottom: 4px;
  }

  .list-header p {
    font-size: 12px;
    color: var(--muted);
  }

  .song-list {
    overflow-y: auto;
    flex: 1;
    padding: 8px 0;
  }

  .song-list::-webkit-scrollbar { width: 4px; }
  .song-list::-webkit-scrollbar-track { background: transparent; }
  .song-list::-webkit-scrollbar-thumb { background: #2a2a2a; border-radius: 4px; }

  .song-item {
    display: flex;
    align-items: center;
    gap: 14px;
    padding: 12px 24px;
    cursor: pointer;
    transition: background 0.15s;
    border-radius: 0;
    position: relative;
  }

  .song-item:hover { background: #141414; }

  .song-item.active {
    background: var(--active);
  }

  .song-item.active::before {
    content: '';
    position: absolute;
    left: 0;
    top: 0;
    bottom: 0;
    width: 3px;
    background: var(--accent);
    border-radius: 0 2px 2px 0;
  }

  .song-num {
    font-size: 12px;
    color: var(--muted);
    width: 18px;
    text-align: center;
    flex-shrink: 0;
  }

  .song-item.active .song-num {
    color: var(--accent);
  }

  .song-thumb {
    width: 42px;
    height: 42px;
    border-radius: 8px;
    background: var(--surface2);
    flex-shrink: 0;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 20px;
    overflow: hidden;
  }

  .song-thumb img { width: 100%; height: 100%; object-fit: cover; }

  .song-meta {
    flex: 1;
    min-width: 0;
  }

  .song-name {
    font-size: 14px;
    font-weight: 500;
    color: var(--text);
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    margin-bottom: 3px;
  }

  .song-item.active .song-name { color: var(--accent); }

  .song-by {
    font-size: 12px;
    color: var(--muted);
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  }

  .song-dur {
    font-size: 12px;
    color: var(--muted);
    flex-shrink: 0;
  }

  /* Equalizer bars for active song */
  .eq-bars {
    display: none;
    gap: 2px;
    align-items: flex-end;
    height: 14px;
  }

  .song-item.active.playing .eq-bars { display: flex; }
  .song-item.active.playing .song-num { display: none; }

  .eq-bars span {
    display: block;
    width: 3px;
    background: var(--accent);
    border-radius: 2px;
    animation: eq 0.8s ease-in-out infinite alternate;
  }

  .eq-bars span:nth-child(2) { animation-delay: 0.2s; }
  .eq-bars span:nth-child(3) { animation-delay: 0.4s; }

  @keyframes eq {
    from { height: 4px; }
    to { height: 14px; }
  }

  /* Responsive */
  @media (max-width: 640px) {
    .app {
      grid-template-columns: 1fr;
      max-width: 380px;
      min-height: auto;
    }
    .player-panel { border-right: none; border-bottom: 1px solid #222; padding: 28px 24px; }
    .album-art { width: 180px; height: 180px; }
    .list-panel { max-height: 340px; }
  }
</style>
</head>
<body>

<div class="app">
  <!-- Player Panel -->
  <div class="player-panel">
    <div class="album-art" id="albumArt">
      <img src="cover.jpg" id="coverImg" alt="Cover" onerror="this.parentNode.innerHTML='ðŸŽµ'">
    </div>

    <div class="song-info">
      <div class="song-title" id="songTitle">Surat Cinta Untuk Starla</div>
      <div class="song-artist" id="songArtist">Virgoun</div>
    </div>

    <div class="progress-wrap">
      <div class="time-row">
        <span id="currentTime">0:00</span>
        <span id="totalTime">0:00</span>
      </div>
      <input type="range" id="progress" value="0" min="0" max="100">
    </div>

    <div class="controls">
      <button class="btn-icon" id="btnPrev" title="Previous">&#9664;&#9664;</button>
      <button class="btn-play" id="btnPlay" title="Play/Pause">&#9654;</button>
      <button class="btn-icon" id="btnNext" title="Next">&#9654;&#9654;</button>
    </div>
  </div>

  <!-- List Panel -->
  <div class="list-panel">
    <div class="list-header">
      <h3>Daftar Lagu</h3>
      <p id="listCount">0 lagu</p>
    </div>
    <div class="song-list" id="songList"></div>
  </div>
</div>

<audio id="audio" preload="auto"></audio>

<script>
const songs = [
  { title: "Surat Cinta Untuk Starla", artist: "Virgoun", src: "starla.mp3", cover: "cover.jpg", duration: "4:51" },
  { title: "Virgoun - Selamat Tinggal", artist: "Virgoun", src: "selamat-tinggal.mp3", cover: "cover.jpg", duration: "5:53" },
  { title: "Seluruh Nafas Ini", artist: "Last Child", src: "s.mp3", cover: "", duration: "4:53" },
  { title: "Duka - Last Child", artist: "Last Child", src: "d.mp3", cover: "", duration: "5:21" },
  { title: "Pedih - Last Child", artist: "Last Child", src: "p.mp3", cover: "", duration: "4:13" },
  { title: "Bukti - Virgoun", artist: "Virgoun", src: "b.mp3", cover: "", duration: "4:43" },
  { title: "Last Child - Diary Depresiku", artist: "Last Child", src: "di.mp3", cover: "", duration: "4:39" },
  { title: "Last Child - Sekuat Hatimu", artist: "Last Child", src: "se.mp3", cover: "", duration: "4:42" },
];

const audio = document.getElementById("audio");
const btnPlay = document.getElementById("btnPlay");
const btnPrev = document.getElementById("btnPrev");
const btnNext = document.getElementById("btnNext");
const progress = document.getElementById("progress");
const currentTimeEl = document.getElementById("currentTime");
const totalTimeEl = document.getElementById("totalTime");
const songTitle = document.getElementById("songTitle");
const songArtist = document.getElementById("songArtist");
const coverImg = document.getElementById("coverImg");
const albumArt = document.getElementById("albumArt");
const songListEl = document.getElementById("songList");
const listCount = document.getElementById("listCount");

let currentIndex = 0;
let isPlaying = false;

function formatTime(s) {
  if (isNaN(s)) return "0:00";
  const m = Math.floor(s / 60);
  const sec = Math.floor(s % 60);
  return `${m}:${sec.toString().padStart(2, "0")}`;
}

function loadSong(idx) {
  const s = songs[idx];
  songTitle.textContent = s.title;
  songArtist.textContent = s.artist;
  audio.src = s.src;

  if (s.cover) {
    coverImg.src = s.cover;
    albumArt.innerHTML = `<img src="${s.cover}" alt="Cover" onerror="this.parentNode.innerHTML='ðŸŽµ'">`;
  } else {
    albumArt.innerHTML = "ðŸŽµ";
  }

  renderList();
  currentIndex = idx;

  if ("mediaSession" in navigator) {
    navigator.mediaSession.metadata = new MediaMetadata({
      title: s.title,
      artist: s.artist,
      album: "Playlist",
      artwork: s.cover ? [{ src: s.cover, sizes: "512x512", type: "image/jpeg" }] : []
    });
  }
}

function renderList() {
  listCount.textContent = `${songs.length} lagu`;
  songListEl.innerHTML = "";
  songs.forEach((s, i) => {
    const item = document.createElement("div");
    item.className = "song-item" + (i === currentIndex ? " active" : "") + (i === currentIndex && isPlaying ? " playing" : "");
    item.innerHTML = `
      <div class="song-num">
        ${i + 1}
        <div class="eq-bars"><span></span><span></span><span></span></div>
      </div>
      <div class="song-thumb">
        ${s.cover ? `<img src="${s.cover}" alt="" onerror="this.parentNode.innerHTML='ðŸŽµ'">` : "ðŸŽµ"}
      </div>
      <div class="song-meta">
        <div class="song-name">${s.title}</div>
        <div class="song-by">${s.artist}</div>
      </div>
      <div class="song-dur">${s.duration}</div>
    `;
    item.addEventListener("click", () => {
      currentIndex = i;
      loadSong(i);
      playAudio();
    });
    songListEl.appendChild(item);
  });
}

function playAudio() {
  audio.play().catch(() => {});
  isPlaying = true;
  btnPlay.innerHTML = "&#9646;&#9646;";
  albumArt.classList.add("playing");
  renderList();
}

function pauseAudio() {
  audio.pause();
  isPlaying = false;
  btnPlay.innerHTML = "&#9654;";
  albumArt.classList.remove("playing");
  renderList();
}

btnPlay.addEventListener("click", () => {
  isPlaying ? pauseAudio() : playAudio();
});

btnPrev.addEventListener("click", () => {
  currentIndex = (currentIndex - 1 + songs.length) % songs.length;
  loadSong(currentIndex);
  playAudio();
});

btnNext.addEventListener("click", () => {
  currentIndex = (currentIndex + 1) % songs.length;
  loadSong(currentIndex);
  playAudio();
});

audio.addEventListener("timeupdate", () => {
  if (audio.duration) {
    progress.value = (audio.currentTime / audio.duration) * 100;
    currentTimeEl.textContent = formatTime(audio.currentTime);
    totalTimeEl.textContent = formatTime(audio.duration);
  }
});

progress.addEventListener("input", () => {
  audio.currentTime = (progress.value / 100) * audio.duration;
});

audio.addEventListener("ended", () => {
  currentIndex = (currentIndex + 1) % songs.length;
  loadSong(currentIndex);
  playAudio();
});

if ("mediaSession" in navigator) {
  navigator.mediaSession.setActionHandler("play", playAudio);
  navigator.mediaSession.setActionHandler("pause", pauseAudio);
  navigator.mediaSession.setActionHandler("previoustrack", () => {
    currentIndex = (currentIndex - 1 + songs.length) % songs.length;
    loadSong(currentIndex); playAudio();
  });
  navigator.mediaSession.setActionHandler("nexttrack", () => {
    currentIndex = (currentIndex + 1) % songs.length;
    loadSong(currentIndex); playAudio();
  });
}

// Init
loadSong(0);
</script>
</body>
</html>
